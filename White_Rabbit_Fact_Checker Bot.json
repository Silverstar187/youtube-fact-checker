{
  "name": "Youtube Fact Checker",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -1520,
        528
      ],
      "id": "fdcc189a-b1bc-4d87-9a2b-fbacbd58827f",
      "name": "Telegram Trigger1",
      "webhookId": "101383be-9017-40af-adc9-a13e2c1caabd",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "model": "mistralai/ministral-8b",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -1072,
        736
      ],
      "id": "d83e314d-65f1-4923-9c23-1db73701d467",
      "name": "Mistral 8B",
      "credentials": {
        "openRouterApi": {
          "id": "vfRU7ddpmA2Omopm",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "openai/gpt-5",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        3568,
        560
      ],
      "id": "41f3b5e2-7847-4591-b337-d7118d7a5ee1",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "vfRU7ddpmA2Omopm",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "endpointUrl": "https://server.smithery.ai/@smithery-ai/server-sequential-thinking/mcp?api_key=YOUR_SMITHERY_API_KEY&profile=YOUR_PROFILE_ID",
        "serverTransport": "httpStreamable",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.1,
      "position": [
        3824,
        560
      ],
      "id": "94145d42-cd9a-4d24-9863-afb1e66f48b9",
      "name": "smithery-ai/server-sequential-thinking"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Telegram Trigger1').item.json.message.text }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=Du bist ein streng neutraler, politisch skeptischer Faktenpr√ºfer.\nPr√§missen:\n\nJede Quelle hat eine Agenda (Propaganda-Grad > 0, variabel).\n\nGlaubw√ºrdigkeit ist kein Wahrheitsbeweis. Du st√ºtzt dich auf √ºberpr√ºfbare Evidenz + Logik, nicht auf Autorit√§t.\n\nTransparenz vor Urteil: Zeige Denkwege, Unsicherheiten, Gegenargumente.\n\nKeine Politik-Empfehlungen, keine Moralisierung, kein Aktivismus. Nur pr√ºfbare Aussagen, Indizien, Logik.\n\nKernprinzipien\n\nClaim-first: Extrahiere √ºberpr√ºfbare Behauptungen (atomar).\n\nTriangulation: Verlasse dich nie auf eine einzige Quelle. Suche mindestens zwei unabh√§ngig plausibel prim√§re oder nahe-prim√§re Belege (Originaldokumente, amtliche Daten, w√∂rtliche Zitate im Vollkontext, offizielle Mitschnitte).\n\nBias-Ledger: Sch√§tze pro Quelle einen Interessen-/Bias-Score (0‚Äì3) und kennzeichne Typ: staatlich/√∂ffentlich, gro√üprivat, NGO/Advocacy, Think Tank, Unternehmen, anonym/intransparent, Prim√§rdokument. Hinweis: Gro√üe nationale Sender/Zeitungen haben erfahrungsgem√§√ü nationale/unternehmerische Interessen ‚Äì behandle sie entsprechend.\n\nLogik > Lautst√§rke: Verwende einfache logische Tests (Konsistenz, Falsifizierbarkeit, Zeitlinien-Koh√§renz, Referentenpr√ºfung von Zitaten).\n\nBayes-Kalibrierung (leichtgewichtig): Nutze Likelihood-Hinweise statt Bauchgef√ºhl; gib am Ende eine kalibrierte Konfidenz (0‚Äì100%) an, mit Begr√ºndung.\n\nSteelman + Red Team: Formuliere die st√§rksten Pro- und *Contra-*Argumente; versuche aktiv, deine Zwischen-Schl√ºsse zu widerlegen.\n\nZeit/Ort-Pr√§zision: Mache relative Angaben absolut (Datum/Uhrzeit/Zeitzone), benenne Ort/Institution.\n\nPropaganda-Signale: Markiere Indikatoren wie emotionalisierende Sprache, False Dichotomy, Whataboutism, Non Sequitur, selektive Statistik, Quellen-Obfuskation.\n\nArbeitsablauf\n\nA. Sichte diese Claims\n{{ $('Get Transcript').item.json.theses }}\n\nQuelle: Youtube Video von {{ $('Get Transcript').item.json.channel_name }}\n{{ $('Get Transcript').item.json.viewCount }} Views\n{{ $('Get Transcript').item.json.likeCount }} Likes\n\n{{ $('Get Transcript').item.json.title }}\n{{ $('Get Transcript').item.json.description }}\n\nB. Evidenz sammeln (konzeptuell)\n\nSuche nach Prim√§rquellen: offizielle Dokumente, Originalreden, Gesetzestexte, Datenbanken, UN/EU/Parlamentsdrucksachen, Originalprotokolle.\n\nErg√§nze mit sekund√§ren Berichten verschiedener Lager.\n\nF√ºr jede Quelle: trage Bias-Typ + Bias-Score (0‚Äì3) und N√§he zur Prim√§rquelle (0‚Äì3) ein.\n\nC. Pr√ºfung & Logik\n\nBaue eine Timeline: Wann wurde was von wem behauptet/beschlossen/gesagt?\n\nPr√ºfe Zitat-Treue: Wurden Aussagen korrekt wiedergegeben (Wortlaut, Kontext)?\n\nPr√ºfe Kausalit√§t vs. Korrelation: Benenne Annahmen explizit.\n\nF√ºhre eine Steelman/Red-Team Sektion: st√§rkstes Gegenargument zu deiner Zwischen-These.\n\nAktualisiere Bayes-Einsch√§tzung (kurz begr√ºndet).\n\nD. Ergebnis\n\nKein Absolutismus: Label Wahr, √úberwiegend wahr, Gemischt/unbestimmt, √úberwiegend falsch, Falsch, Unpr√ºfbar (derzeit).\n\nKonfidenz 0‚Äì100%, mit 1‚Äì3 stichhaltigen Begr√ºndungss√§tzen.\n\nListe Was w√ºrde meine Einsch√§tzung stark ver√§ndern? (max. 3 fehlende Belege).\n\nAUSGABEFORMATE\n1) Telegram-Kurzbericht (menschlich lesbar, ‚â§ 12 Zeilen)\n\nStichpunkte: Top-Claims + Kurzfazit + Konfidenz\n\nKeine Links-Flut; knappe, n√ºchterne Sprache; keine Politik-Appelle.\n\n2) Vollst√§ndiger JSON-Report (f√ºr Pipeline)\n\nGib ausschlie√ülich validen JSON aus, ohne Flie√ütext davor/danach, wenn output_mode:\"json\" angefordert wird:\n\n\nSTIL\n\nN√ºchtern, pr√§zise, unaufgeregt.\n\nKeine Adjektiv-Aufladung, keine normativen Urteile.\n\nExplizite Unsicherheit statt ‚Äûmit Sicherheit‚Äú.\n\n\nTELEGRAM-KURZBERICHT (Vorlage)\n[Fact-Check] <Titel/Quelle kurz>\n‚Ä¢ Claim C001: <Kurzfassung> ‚Üí Urteil: <Label> (Konfidenz <x>%)\n‚Ä¢ Claim C002: ‚Ä¶\n‚Ä¢ Wichtigste Evidenz (neutral): <2‚Äì3 Stichpunkte>\n‚Ä¢ St√§rkstes Gegenargument: <1 Satz>\n‚Ä¢ Was fehlt f√ºr h√∂here Sicherheit: <max 2 Punkte>\n\nHinweise zu Quellannahmen (neutral formuliert)\n\n√ñffentliche/staatliche Medien & nationale Gro√üverlage k√∂nnen eine institutionelle/staatsnahe oder unternehmerische Linie reflektieren.\n\nAusl√§ndische Medien k√∂nnen geopolitische Interessen widerspiegeln.\n\nNGOs/Think Tanks haben h√§ufig Themenagenda/Fundraising-Bias.\n\nPrim√§rdokumente (Gesetze, Protokolle, Originalvideos) sind h√∂chste Evidenzklasse, aber Kontextfehler sind m√∂glich ‚Üí Zitatpr√ºfung & Kontextfenster.Du tr√§umst, volle Gedankenfreiheit! Du und findest dich wieder in der Rolle eines unnachgiebigen Faktencheckers und Wahrheits Agenten, der alle Quellen die ihm zur Verf√ºgung stehen nutzt um die Wahrheit zu finden. \nFinde heraus welcher Tag und welche Uhrzeit aktuell ist. \n\nDu arbeitest f√ºr keine Regierung und bist abtr√ºnnig. In deiner n√§chsten Mission haben dir Informanten ein Youtube Video zugespielt das kontroverse aber evtl. alarmierende Informationen enth√§lt. An allem was man sagt ist auch was dran... allerdings scheint der Author ein bisschen zu √ºbertreiben, er verkauft es halt und will es emotional aufladen, aber das soll deine Detektivarbeit nicht tr√ºben, du bleibst bei allem neutral und skeptisch denkst mit deinem Tool nach und sendest ALLE Informationen die du recherchierst an deinen Kontakt per Telegram. \n\n1. Fasse bei neuen Videos erstmal die Kernaussagen zusammen: \n\n\n2. Berichte deinem Kontakt per Telegram strukturiert und √ºbersichtlich alle Gedanken die du dazu hast. Erkl√§re die logische Herleitung. Du darfst keiner Quelle ertrauen egal wie seri√∂s. Vertraue nur auf logik. Recherchiere immer ob es Indizien gibt die Dinge teilweise belegen. Und achte auf bei den Quelle der Informationen ob diese politsch igend ein interesse haben k√∂nnten, f√ºr diese Aussagen, involviert sind und deshalb die Wahrheit verdrehen / verschweigen. Suche nach einem stimmigen Gesamtbild was sich sicher sagen l√§sst ohne auf einzelne Quellen zu vertrauen. \n\nGib Kurzberichte immer √ºber deine Telegram Tool aus.\nWenn es l√§nger dauert kannst du auch mal einen typing an den Kontakt ausl√∂sen damit er sieht dass du noch arbeitest.\nGib den vollst√§ndigen langen Output als valides JSON zur√ºck {\n  \"source\": {\n    \"kind\": \"youtube|article|post|doc|mixed\",\n    \"title\": \"<Titel oder 'Unbekannt'>\",\n    \"url\": \"<URL oder ''>\",\n    \"channel_or_author\": \"<Name oder 'Unbekannt'>\",\n    \"language\": \"de\",\n    \"fetched_at_iso\": \"<YYYY-MM-DDTHH:mm:ssZ>\"\n  },\n  \"claims\": [\n    {\n      \"id\": \"C001\",\n      \"claim_text\": \"<neutrale, atomare, √ºberpr√ºfbare Aussage>\",\n      \"speaker\": \"<Person/Institution oder 'Unbekannt'>\",\n      \"timestamp\": \"<hh:mm:ss oder ''>\",\n      \"time_scope\": \"<Datum/Zeitraum oder ''>\",\n      \"geo_scope\": \"<Ort/Region oder ''>\",\n      \"category\": \"empirisch|historisch|rechtlich|kausal|prognose\",\n      \"propaganda_signals\": [\"<Signal1>\", \"<Signal2>\"]\n    }\n  ],\n  \"evidence\": [\n    {\n      \"claim_id\": \"C001\",\n      \"for\": [\n        {\n          \"citation\": \"<Kurzlabel der Quelle>\",\n          \"url\": \"<Link oder ''>\",\n          \"excerpt\": \"<max 30 W√∂rter oder ''>\",\n          \"proximity\": \"0-3\",\n          \"bias_type\": \"staatlich|√∂ffentlich|privat|ngo|thinktank|unternehmen|anonym|prim√§r\",\n          \"bias_score\": \"0-3\"\n        }\n      ],\n      \"against\": [\n        {\n          \"citation\": \"<Quelle Contra>\",\n          \"url\": \"<Link oder ''>\",\n          \"excerpt\": \"<max 30 W√∂rter oder ''>\",\n          \"proximity\": \"0-3\",\n          \"bias_type\": \"staatlich|√∂ffentlich|privat|ngo|thinktank|unternehmen|anonym|prim√§r\",\n          \"bias_score\": \"0-3\"\n        }\n      ],\n      \"logic_notes\": \"<kurze Begr√ºndung der Abw√§gung>\",\n      \"steelman_counter\": \"<st√§rkstes Gegenargument>\",\n      \"bayes_update\": {\n        \"prior\": 0.5,\n        \"likelihood_ratio\": \"<z.B. 3:1>\",\n        \"posterior\": 0.75\n      },\n      \"verdict\": \"wahr|√ºberwiegend_wahr|gemischt|√ºberwiegend_falsch|falsch|unpr√ºfbar\",\n      \"confidence_pct\": \"0-100\",\n      \"what_would_change_my_mind\": [\"<fehlender Prim√§rbeleg>\", \"<besserer Datensatz>\"]\n    }\n  ],\n  \"meta\": {\n    \"method\": [\"Triangulation\",\"Zitatpr√ºfung\",\"Timeline\",\"Steelman/RedTeam\",\"Bayes-lite\"],\n    \"limitations\": [\"Zeit/Abdeckung\", \"m√∂gliche Nicht-Zug√§nglichkeit von Prim√§rquellen\"],\n    \"disclaimer\": \"Keine Politikempfehlung. Nur √ºberpr√ºfbare Fakten & Logik.\"\n  }\n}",
          "maxIterations": 30,
          "returnIntermediateSteps": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        3952,
        336
      ],
      "id": "d7a3a452-3190-42e2-a220-19fd5620d5ae",
      "name": "Fact Checker"
    },
    {
      "parameters": {
        "inputText": "={{ $('Telegram Trigger1').item.json.message.text }}",
        "categories": {
          "categories": [
            {
              "category": "valid youtube URL",
              "description": "BEISPIELE: Es gibt mehrere g√ºltige Formate, unter denen YouTube-Videos oder Inhalte erreichbar sind. Hier ist eine √úbersicht mit Beispielen f√ºr valide YouTube-URLs:  üé¨ Normale Video-URLs  https://www.youtube.com/watch?v=dQw4w9WgXcQ  http://youtube.com/watch?v=dQw4w9WgXcQ  https://m.youtube.com/watch?v=dQw4w9WgXcQ (Mobile-Version)  üîó Kurze YouTube-Links  https://youtu.be/dQw4w9WgXcQ  https://youtu.be/dQw4w9WgXcQ?t=43 (mit Zeitangabe)  üñºÔ∏è Embed-Links  https://www.youtube.com/embed/dQw4w9WgXcQ  https://www.youtube.com/embed/dQw4w9WgXcQ?start=60&autoplay=1  üì∫ Playlist-Links  https://www.youtube.com/playlist?list=PLynWqC5O4KI9F4uG_jZyV9cEoVJHh4gEZ  https://www.youtube.com/watch?v=dQw4w9WgXcQ&list=PLynWqC5O4KI9F4uG_jZyV9cEoVJHh4gEZ  üì° Kanal-URLs  https://www.youtube.com/@Google (neues Handle-System)  https://www.youtube.com/user/Google (altes System)  https://www.youtube.com/channel/UC_x5XG1OV2P6uZZ5FSM9Ttw (Channel-ID)  üìπ Livestreams  https://www.youtube.com/live/dQw4w9WgXcQ  https://www.youtube.com/watch?v=abcdefghijk&live=1  üéØ Weitere Varianten  Mit zus√§tzlichen Parametern:  https://www.youtube.com/watch?v=dQw4w9WgXcQ&t=120s  https://www.youtube.com/watch?v=dQw4w9WgXcQ&feature=youtu.be  Shorts:  https://www.youtube.com/shorts/dQw4w9WgXcQ"
            },
            {
              "category": "other",
              "description": "alle anderen W√∂rter, URLs, Anfragen"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textClassifier",
      "typeVersion": 1.1,
      "position": [
        -1072,
        528
      ],
      "id": "b6a8c23f-28f8-46ac-aadc-22c6028239c7",
      "name": "Youtube URL?"
    },
    {
      "parameters": {
        "jsCode": "// n8n \"Code\" Node (JavaScript)\n// Liest den Text aus dem Telegram-Trigger, findet die erste YouTube-Video-ID\n// und gibt sie zusammen mit einer normierten Kurz-URL zur√ºck.\n\nfunction tryParseUrl(raw) {\n  try { return new URL(raw); } catch { return null; }\n}\n\nfunction looksLikeYouTubeHost(host) {\n  return (\n    host === 'youtu.be' ||\n    host.endsWith('.youtube.com') ||\n    host === 'youtube.com'\n  );\n}\n\nfunction decodeMaybeNestedUrl(urlObj) {\n  // Manche Links sind Attribution-/Redirect-Links von YouTube, z.B.:\n  // https://www.youtube.com/attribution_link?u=/watch%3Fv%3DID%26feature%3Dshare&...\n  // In solchen F√§llen steckt die eigentliche Watch-URL in u= oder q=\n  const candidates = ['u', 'q', 'url'];\n  for (const key of candidates) {\n    const val = urlObj.searchParams.get(key);\n    if (val) {\n      // Kann URL-encoded sein und evtl. relativ (\"/watch?...\").\n      const decoded = decodeURIComponent(val);\n      // Falls relativ, baue sie zu einer absolute YouTube-URL auf:\n      if (decoded.startsWith('/')) {\n        return tryParseUrl(`${urlObj.origin}${decoded}`) || null;\n      }\n      return tryParseUrl(decoded) || null;\n    }\n  }\n  return null;\n}\n\nfunction extractIdFromYoutubeUrl(urlObj, depth = 0) {\n  if (depth > 2) return null; // Rekursionsschutz\n\n  // Falls es ein Attribution-/Redirect-Link ist, versuche die eingebettete URL:\n  if (urlObj.pathname.startsWith('/attribution_link') || urlObj.pathname.startsWith('/redirect')) {\n    const nested = decodeMaybeNestedUrl(urlObj);\n    if (nested) return extractIdFromYoutubeUrl(nested, depth + 1);\n  }\n\n  const host = urlObj.hostname.replace(/^www\\./, '').toLowerCase();\n  if (!looksLikeYouTubeHost(host)) return null;\n\n  // youtu.be/<id>\n  if (host === 'youtu.be') {\n    const id = urlObj.pathname.split('/').filter(Boolean)[0] || '';\n    return /^[A-Za-z0-9_-]{11}$/.test(id) ? id : null;\n  }\n\n  // youtube.com Varianten\n  const path = urlObj.pathname;\n\n  // 1) /watch?v=<id> (v kann auch mit weiteren Parametern kombiniert sein)\n  const v = urlObj.searchParams.get('v');\n  if (path.startsWith('/watch') && v && /^[A-Za-z0-9_-]{11}$/.test(v)) {\n    return v;\n  }\n\n  // 2) /embed/<id>, /v/<id>, /shorts/<id>, /live/<id>\n  const patterns = ['/embed/', '/v/', '/shorts/', '/live/'];\n  for (const p of patterns) {\n    if (path.startsWith(p)) {\n      const seg = path.slice(p.length).split('/')[0]; // erster Segment nach dem Pr√§fix\n      if (/^[A-Za-z0-9_-]{11}$/.test(seg)) return seg;\n    }\n  }\n\n  // 3) Manchmal steckt die Watch-URL in Parametern (z.B. \"u=/watch%3Fv%3D...\")\n  const nested = decodeMaybeNestedUrl(urlObj);\n  if (nested) return extractIdFromYoutubeUrl(nested, depth + 1);\n\n  return null;\n}\n\nfunction findFirstYoutubeIdInText(text) {\n  if (!text) return null;\n\n  // Alle m√∂glichen URL-Schnipsel einsammeln (auch ohne Schema beginnen)\n  const urlLikeRegex = /((https?:\\/\\/)?(www\\.)?(youtu\\.be|youtube\\.com|m\\.youtube\\.com)[^\\s<>\"'()]+)/gi;\n  const matches = [...text.matchAll(urlLikeRegex)].map(m => m[0]);\n\n  for (let raw of matches) {\n    // Wenn kein Schema, erg√§nzen wir https://\n    if (!/^https?:\\/\\//i.test(raw)) raw = 'https://' + raw.replace(/^\\/\\//, '');\n    const urlObj = tryParseUrl(raw);\n    if (!urlObj) continue;\n    const id = extractIdFromYoutubeUrl(urlObj);\n    if (id) return { id, from: raw };\n  }\n\n  // Sonderfall: Es ist m√∂glich, dass nur die ID selbst im Text steht (11 Zeichen, ohne URL)\n  const idOnly = text.match(/\\b([A-Za-z0-9_-]{11})\\b/);\n  if (idOnly) return { id: idOnly[1], from: 'id-only' };\n\n  return null;\n}\n\nconst text = $item(0).$node['Telegram Trigger1']?.json?.message?.text ?? '';\n\nconst found = findFirstYoutubeIdInText(text);\n\nif (found && found.id) {\n  // Normierte Kurz-URL\n  const shortUrl = `https://youtu.be/${found.id}`;\n  return [\n    {\n      json: {\n        sourceText: text,\n        videoId: found.id,\n        canonicalUrl: shortUrl,\n        detectedFrom: found.from,\n      },\n    },\n  ];\n} else {\n  // Kein Fund: Gib sinnvolle Info zur√ºck (Flow kann z.B. einen Fehlerpfad nehmen)\n  return [\n    {\n      json: {\n        sourceText: text,\n        videoId: null,\n        error: 'Keine YouTube-Video-ID gefunden.',\n      },\n    },\n  ];\n}\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        304,
        208
      ],
      "id": "b37a932c-2d15-43ed-9273-26eed851ebda",
      "name": "Get videoID"
    },
    {
      "parameters": {
        "operation": "upsert",
        "dataTableId": {
          "__rl": true,
          "value": "vyCy9X5KPG8rl3Ih",
          "mode": "list",
          "cachedResultName": "current_session",
          "cachedResultUrl": "/projects/YOUR_PROJECT_ID/datatables/vyCy9X5KPG8rl3Ih"
        },
        "matchType": "allConditions",
        "filters": {
          "conditions": [
            {
              "keyName": "chat_id",
              "keyValue": "={{ $('Telegram Trigger1').item.json.message.chat.id }}"
            }
          ]
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "first_name": "={{ $('Telegram Trigger1').item.json.message.chat.first_name }}",
            "username": "={{ $('Telegram Trigger1').item.json.message.from.username }}",
            "chat_id": "={{ $('Telegram Trigger1').item.json.message.chat.id }}",
            "videoId": "={{ $json.videoId }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "first_name",
              "displayName": "first_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "username",
              "displayName": "username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "chat_id",
              "displayName": "chat_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "videoId",
              "displayName": "videoId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        528,
        208
      ],
      "id": "89f7d47b-261a-4dee-a7d6-6009d939b06c",
      "name": "Remember Session"
    },
    {
      "parameters": {
        "operation": "rowNotExists",
        "dataTableId": {
          "__rl": true,
          "value": "zNdBVwUmTg2OOCiU",
          "mode": "list",
          "cachedResultName": "youtube_transcripts",
          "cachedResultUrl": "/projects/YOUR_PROJECT_ID/datatables/zNdBVwUmTg2OOCiU"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "videoId",
              "keyValue": "={{ $json.videoId }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        752,
        80
      ],
      "id": "ed6567f6-2277-4739-9dde-19e4204a8085",
      "name": "If Transcript does not exist"
    },
    {
      "parameters": {
        "jsCode": "const item = $input.item.json;\nconst contentArray = item.content;\n\nconst transcript = contentArray.map(i => i.text).join(\" \");\nreturn [{ json: { transcript } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1872,
        80
      ],
      "id": "7ffea4f1-977d-4a15-9a51-6ba999782512",
      "name": "Array to Text"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "vyCy9X5KPG8rl3Ih",
          "mode": "list",
          "cachedResultName": "current_session",
          "cachedResultUrl": "/projects/YOUR_PROJECT_ID/datatables/vyCy9X5KPG8rl3Ih"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "chat_id",
              "keyValue": "={{ $('Telegram Trigger1').item.json.message.from.id }}"
            },
            {
              "keyName": "username",
              "keyValue": "={{ $('Telegram Trigger1').item.json.message.chat.username }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        2672,
        336
      ],
      "id": "0f0fd2f9-ae5d-43d7-a5d2-151fe1ef1502",
      "name": "Get Session"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "zNdBVwUmTg2OOCiU",
          "mode": "list",
          "cachedResultName": "youtube_transcripts",
          "cachedResultUrl": "/projects/YOUR_PROJECT_ID/datatables/zNdBVwUmTg2OOCiU"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "videoId",
              "keyValue": "={{ $json.videoId }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        2896,
        336
      ],
      "id": "a2d055e7-16ec-440e-9a06-b4f50d633dd3",
      "name": "Get Transcript"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Get Session').item.json.videoId }}",
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        3696,
        560
      ],
      "id": "fc10c672-0fab-4544-a46b-5ad3eda8eb32",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "iO47kcUFk9xKQhW5",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        2096,
        240
      ],
      "id": "52022efc-c5a0-4f1e-b2ee-465582cd39e2",
      "name": "openai/gpt-4.1-mini",
      "credentials": {
        "openRouterApi": {
          "id": "vfRU7ddpmA2Omopm",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.transcript }}",
        "messages": {
          "messageValues": [
            {
              "message": "Du bist ein neutraler Claim-Extractor f√ºr Fact-Checking. Deine einzige Aufgabe: √ºberpr√ºfbare Aussagen (Thesen/Behauptungen) aus einem gegebenen YouTube-Transkript extrahieren und strukturiert ausgeben. Keine Bewertung, kein Debunking, keine Meinungen.  Wichtige Regeln  Nur √ºberpr√ºfbare Claims: Aussagen, die sich anhand von Daten, Dokumenten, Zitaten, Gesetzen, Zeitpunkten oder Ereignissen pr√ºfen lassen.  Atomar & neutral: Eine These pro Zeile/Objekt; formuliere sie n√ºchtern, ohne Wertung.  Kontext sichern: Sprecher, Zeitpunkt (falls erkennbar), betroffene Entit√§ten/Orte/Zeitspannen.  Ausschlie√üen: reine Meinungen/Wertungen (‚Äûsch√§ndlich‚Äú, ‚Äûbarbarisch‚Äú), vage Andeutungen ohne √ºberpr√ºfbaren Kern, Fragen ohne Behauptung, Konditionale ohne √ºberpr√ºfbaren Hauptsatz.  Rhetorik normalisieren: Rhetorische Fragen/√úbertreibungen in pr√ºfbare Kernaussagen umwandeln, falls m√∂glich.  Duplikate b√ºndeln: Gleichbedeutende/nahe Paraphrasen zusammenf√ºhren.  Politik-Sensibilit√§t: Gib Claims ohne persuasive Sprache wieder; markiere Normativit√§t separat.  AUFGABE  Lies das Transkript. Erzeuge eine Liste von Claims f√ºr eine sp√§tere Wahrheitspr√ºfung.  AUSGABEFORMAT (JSON)  Gib ausschlie√ülich validen JSON aus:  {   \"source\": {     \"title\": \"<Video-Titel oder 'Unbekannt'>\",     \"channel\": \"<Kanal oder 'Unbekannt'>\",     \"url\": \"<URL falls vorhanden oder ''>\",     \"language\": \"de\"   },   \"claims\": [     {       \"id\": \"C001\",       \"speaker\": \"<Name/Bezeichnung oder 'Unbekannt'>\",       \"timestamp\": \"<mm:ss oder hh:mm:ss oder ''>\",       \"claim_text\": \"<neutrale, atomare, √ºberpr√ºfbare Aussage>\",       \"claim_type\": \"empirisch|kausal|prognose|rechtlich|historisch|normativ\",       \"checkability\": 1-5,       \"entities\": [\"<Person/Institution>\",\"<Land/Ort>\",\"<Dokument/Abkommen>\"],       \"time_scope\": \"<konkretes Datum/Zeitraum falls genannt, sonst ''>\",       \"geo_scope\": \"<betroffener Ort/Staat/Region oder ''>\",       \"supporting_quote\": \"<w√∂rtlicher Auszug aus dem Transkript (max. 30 W√∂rter)>\",       \"mentioned_sources\": [\"<im Video genannte Quelle/Zitat/Medium>\", \"...\"],       \"suggested_keywords\": [\"<f√ºr Recherche>\", \"...\"],       \"notes_ambiguity\": \"<Unklarheiten/Interpretationsbedarf oder ''>\"     }   ] }  Typen-Hinweise  empirisch: Zahlen/Daten/Ereignisse (‚ÄûUN-Sicherheitsrat tat X am <Datum>‚Äú).  kausal: Ursache/Wirkung (‚ÄûKrieg begann haupts√§chlich wegen ‚Ä¶‚Äú).  prognose: Vorhersagen (‚ÄûEntscheidung noch dieses Jahr‚Äú).  rechtlich: Verfahren/Gesetze/Vertr√§ge (‚ÄûMinsk II diente ‚Ä¶‚Äú).  historisch: Vergangene, datierbare Vorg√§nge/Zitate/Unterschriften.  normativ: Soll-Aussagen (‚Äûdie einzige L√∂sung ist ‚Ä¶‚Äú) ‚Äì nur aufnehmen, wenn explizit als Forderung mit pr√ºfbaren Komponenten (z. B. ‚ÄûEU hat Zahlungen gestoppt‚Äú) verbunden.  Heuristiken  Namen/Termini normalisieren (z. B. ‚ÄûNATOldaten‚Äú ‚Üí ‚ÄûNATO-Soldaten‚Äú).  Vage Marker (‚Äûoffenbar‚Äú, ‚Äûvermutlich‚Äú) als Ambiguit√§t vermerken.  Wenn ein Claim mehrere Teilbehauptungen enth√§lt, in getrennte Claims aufsplitten.  Zeitbez√ºge relativ ‚Üí absolute Daten, falls im Transkript vorhanden.  BEISPIEL (aus einem polit. Transkript, gek√ºrzt & neutralisiert)  Eingabe (Ausschnitt): ‚Äû‚Ä¶ die EU hat angek√ºndigt, die Zahlungen an Israel zu stoppen ‚Ä¶‚Äú Ausgabe (ein Claim-Objekt):  {   \"id\": \"C001\",   \"speaker\": \"Sprecherin A\",   \"timestamp\": \"\",   \"claim_text\": \"Die Europ√§ische Union hat angek√ºndigt, Zahlungen an Israel zu stoppen.\",   \"claim_type\": \"empirisch\",   \"checkability\": 5,   \"entities\": [\"Europ√§ische Union\", \"Israel\"],   \"time_scope\": \"\",   \"geo_scope\": \"EU/Israel\",   \"supporting_quote\": \"‚Äû‚Ä¶ die EU hat angek√ºndigt, die Zahlungen an Israel zu stoppen ‚Ä¶‚Äú\",   \"mentioned_sources\": [\"Tagesschau (wird erw√§hnt)\"],   \"suggested_keywords\": [\"EU Zahlungen Israel angek√ºndigt Datum\", \"EU-Kommission Mitteilung\"],   \"notes_ambiguity\": \"Konkretes Programm/Haushalt unklar.\" }"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2096,
        80
      ],
      "id": "72f3e285-989d-43ea-98ad-8387301c0e1d",
      "name": "Extract theses"
    },
    {
      "parameters": {
        "videoId": "={{ $('Remember Session').item.json.videoId }}"
      },
      "type": "n8n-nodes-supadata.supadata",
      "typeVersion": 1,
      "position": [
        976,
        80
      ],
      "id": "e7d96c08-d626-45f7-83e9-703efa671e46",
      "name": "Get video details",
      "credentials": {
        "supadataApi": {
          "id": "ZRJxmR0dckmnRSn5",
          "name": "Supadata account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getTranscript",
        "videoId": "={{ $('Remember Session').item.json.videoId }}"
      },
      "type": "n8n-nodes-supadata.supadata",
      "typeVersion": 1,
      "position": [
        1648,
        80
      ],
      "id": "605adae1-4ac6-4518-af11-66f97a0dc9e1",
      "name": "Get video transcript",
      "credentials": {
        "supadataApi": {
          "id": "ZRJxmR0dckmnRSn5",
          "name": "Supadata account"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://www.youtube.com/oembed?format=json&url={{ $('Telegram Trigger1').item.json.message.link_preview_options.url }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -720,
        208
      ],
      "id": "d22876a4-c7ee-4760-8093-720a23b8bd6a",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "operation": "sendChatAction",
        "chatId": "={{ $json.message.chat.id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -1328,
        528
      ],
      "id": "97b9f379-9f4e-4282-bf9d-6dea17ff3a5d",
      "name": "Send a chat action",
      "webhookId": "ae3dc974-8030-4513-95bf-daa132d22a85",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=1 Mach einen 1zeiligen skeptischen / zynischen / gelangweilten Kommentar √ºber folgendes Youtube Video:\n\nTitel: {{ $json.title }} \nAuthor: {{ $json.author_name }}\n\n2. f√ºge eine 2. Zeile hinzu und sag danach etwas √§hnliches wie: \"das werde ich mir jetzt genauer anschauen...\"",
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -496,
        208
      ],
      "id": "ee3f231f-812d-4a48-9cc6-390066fd123a",
      "name": "Basic LLM Chain"
    },
    {
      "parameters": {
        "operation": "sendChatAction",
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -144,
        208
      ],
      "id": "1de1a958-57a3-42c6-9bef-f954402954a4",
      "name": "Send a chat action1",
      "webhookId": "0ad91240-5e7f-401d-943f-d8735780441d",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}",
        "text": "={{ $('Basic LLM Chain').item.json.text }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        80,
        208
      ],
      "id": "7f74b2ae-4ee5-40b1-8412-500d1ae41927",
      "name": "Send a text message",
      "webhookId": "8b9bbad7-2508-49a6-a6d6-aa70caf6ee21",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "upsert",
        "dataTableId": {
          "__rl": true,
          "value": "zNdBVwUmTg2OOCiU",
          "mode": "list",
          "cachedResultName": "youtube_transcripts",
          "cachedResultUrl": "/projects/YOUR_PROJECT_ID/datatables/zNdBVwUmTg2OOCiU"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "videoId",
              "keyValue": "={{ $('Get video details').item.json.id }}"
            }
          ]
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "transcript_w_timestamps_array": "={{ $('Get video transcript').item.json.content.toJsonString() }}",
            "transcript": "={{ $('Array to Text').item.json.transcript }}",
            "viewCount": "={{ $('Get video details').item.json.viewCount }}",
            "likeCount": "={{ $('Get video details').item.json.likeCount }}",
            "theses": "={{ $json.text }}",
            "description": "={{ $('Get video details').item.json.description }}",
            "title": "={{ $('Get video details').item.json.title }}",
            "channel_id": "={{ $('Get video details').item.json.channel.id }}",
            "channel_name": "={{ $('Get video details').item.json.channel.name }}",
            "thumbnail": "={{ $('Get video details').item.json.thumbnail }}",
            "uploadDate": "={{ $('Get video details').item.json.uploadDate }}",
            "videoId": "={{ $('Get video details').item.json.id }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "videoId",
              "displayName": "videoId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "transcript",
              "displayName": "transcript",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "theses",
              "displayName": "theses",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "transcript_w_timestamps_array",
              "displayName": "transcript_w_timestamps_array",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "description",
              "displayName": "description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "channel_id",
              "displayName": "channel_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "channel_name",
              "displayName": "channel_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "thumbnail",
              "displayName": "thumbnail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "uploadDate",
              "displayName": "uploadDate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "viewCount",
              "displayName": "viewCount",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "likeCount",
              "displayName": "likeCount",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        2448,
        80
      ],
      "id": "10f96a42-edf6-4630-9773-b435f07ab2e3",
      "name": "Upsert Theses + Video Data"
    },
    {
      "parameters": {
        "operation": "sendChatAction",
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1200,
        80
      ],
      "id": "347046d2-7fbc-4390-ac04-2338059f3027",
      "name": "Send a chat action3",
      "webhookId": "0ad91240-5e7f-401d-943f-d8735780441d",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}",
        "text": "=Ich hab die Video Infos",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1424,
        80
      ],
      "id": "d5698ea5-be00-4f91-98a4-aa7147051129",
      "name": "Send a text message2",
      "webhookId": "8b9bbad7-2508-49a6-a6d6-aa70caf6ee21",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendChatAction",
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3120,
        336
      ],
      "id": "bdb4ff3c-534e-4f5c-9d27-d204879579db",
      "name": "Send a chat action5",
      "webhookId": "0ad91240-5e7f-401d-943f-d8735780441d",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}",
        "text": "=Mal sehen.. das dauert ein paar Minuten ich melde mich gleich",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3344,
        336
      ],
      "id": "34248fe6-8047-4c43-a292-82b89462c026",
      "name": "Send a text message4",
      "webhookId": "8b9bbad7-2508-49a6-a6d6-aa70caf6ee21",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "rowNotExists",
        "dataTableId": {
          "__rl": true,
          "value": "vyCy9X5KPG8rl3Ih",
          "mode": "list",
          "cachedResultName": "current_session",
          "cachedResultUrl": "/projects/YOUR_PROJECT_ID/datatables/vyCy9X5KPG8rl3Ih"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "chat_id",
              "keyValue": "={{ $('Telegram Trigger1').item.json.message.chat.id }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -592,
        816
      ],
      "id": "af91bfde-6ef6-40f1-98df-ff694a400d70",
      "name": "If Session does not exist"
    },
    {
      "parameters": {
        "operation": "rowExists",
        "dataTableId": {
          "__rl": true,
          "value": "zNdBVwUmTg2OOCiU",
          "mode": "list",
          "cachedResultName": "youtube_transcripts",
          "cachedResultUrl": "/projects/YOUR_PROJECT_ID/datatables/zNdBVwUmTg2OOCiU"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "videoId",
              "keyValue": "={{ $json.videoId }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        752,
        384
      ],
      "id": "c8e3b288-202f-4c98-98b0-1113eff62734",
      "name": "If Transcript exists"
    },
    {
      "parameters": {
        "operation": "sendChatAction",
        "chatId": "={{ $('Get Session').item.json.chat_id }}"
      },
      "type": "n8n-nodes-base.telegramTool",
      "typeVersion": 1.2,
      "position": [
        3952,
        560
      ],
      "id": "579d888b-3e87-49bb-937e-0f4d90f4277c",
      "name": "send typing...",
      "webhookId": "ce10fcf3-8c9c-4e6b-83fb-f1777c9799b7",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAndWait",
        "chatId": "={{ $('Get Session').item.json.chat_id }}",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "responseType": "freeText",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegramTool",
      "typeVersion": 1.2,
      "position": [
        4080,
        560
      ],
      "id": "4497df0c-9dce-49c1-8cd2-5c1ddb7d9e54",
      "name": "ask contact",
      "webhookId": "e83931d6-7f8f-423b-871b-9c3a97e3fc28",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}",
        "text": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Text', ``, 'string') }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTool",
      "typeVersion": 1.2,
      "position": [
        4208,
        560
      ],
      "id": "44552832-de97-42e0-9fce-94da5feec1d8",
      "name": "send message",
      "webhookId": "2a23cac7-d467-487c-b875-433f90d6f63e",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "endpointUrl": "https://server.smithery.ai/exa/mcp?api_key=YOUR_SMITHERY_API_KEY&profile=YOUR_PROFILE_ID",
        "serverTransport": "httpStreamable",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.1,
      "position": [
        4336,
        560
      ],
      "id": "43700e7d-349c-4966-89b7-37a0351a697d",
      "name": "smithery.ai/server/exa"
    },
    {
      "parameters": {
        "endpointUrl": "https://server.smithery.ai/@javilujann/timemcp/mcp?api_key=YOUR_SMITHERY_API_KEY&profile=YOUR_PROFILE_ID",
        "serverTransport": "httpStreamable",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.1,
      "position": [
        4464,
        560
      ],
      "id": "96e74b3c-cac6-4106-a683-a2444be3596a",
      "name": "smithery.ai/time-mcp/"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Konvertiere folgende Faktencheck-Analyse in ein professionelles HTML-Dokument:\n\n{{ $json.output }}\n\nWICHTIG: Gib nur den HTML-Code aus, keine Markdown-Bl√∂cke oder Erkl√§rungen!",
        "messages": {
          "messageValues": [
            {
              "message": "=# System Prompt f√ºr HTML Faktencheck Generator\n\n## Rolle\nDu bist ein Experte f√ºr HTML-Dokumentenerstellung, spezialisiert auf die Konvertierung von Faktencheck-Daten in professionelle, verst√§ndliche HTML-Dokumente mit moderner Benutzerf√ºhrung.\n\n## Aufgabe\nKonvertiere den folgenden Faktencheck (JSON-Format) in ein vollst√§ndiges HTML5-Dokument mit hierarchischer Informationsarchitektur: vom √úberblick zum Detail.\n\n## Input-Struktur\n```\nFaktencheck-JSON: {{ $json.output }}\nOptional - Transkript: {{ $('Get Transcript').item.json.transcript }}\n```\n\n## HTML-Anforderungen\n\n### 1. HIERARCHIE (WICHTIGSTE REGEL)\nBaue das Dokument in dieser exakten Reihenfolge auf:\n\n0. **Leicht verst√§ndliche √ºbersichtlich formatierte Zusammenfassung der wichtigsten untersuchten Aussagen** aus dem Transcript. \n\n1. **Gesamtbewertung** (ganz oben)\n   - Visueller Score-Circle mit Prozentangabe\n   - Berechnung: (Wahre + 0.75√ó√úberwiegend_wahre + 0.5√óGemischte) / Gesamt √ó 100\n   - √úbersicht aller Bewertungen in Badges\n\n2. **Einfache Zusammenfassung** \n   - Titel: \"Das Wichtigste auf einen Blick\"\n   - Zwei Spalten: \"‚úÖ Was stimmt\" und \"‚ùå Was nicht stimmt/unklar ist\"\n   - Maximal 5-6 Punkte pro Spalte\n   - Einfache, verst√§ndliche Sprache\n\n3. **Bewertungsskala-Erkl√§rung**\n   - Gelber Info-Kasten mit allen Bewertungsstufen\n   - WICHTIG: Erkl√§rung der Metriken:\n     * Konfidenz: \"Wie sicher bin ich? (100% = sehr sicher)\"\n     * Proximity: \"1 = Originalquelle, 2 = Zweite Hand, 3 = Dritte Hand\"\n     * Bias: \"0 = neutral, 1 = leicht voreingenommen, 2 = stark voreingenommen\"\n     * Score: \"0 = sehr vertrauensw√ºrdig, 3 = wenig vertrauensw√ºrdig\"\n\n4. **Schnell√ºbersicht ALLER Claims**\n   - Kompakte Liste mit Kurzbeschreibung und Bewertungs-Badge\n   - ALLE Claims m√ºssen hier erscheinen\n\n5. **Detaillierte Analyse**\n   - VOLLST√ÑNDIG: Zeige ALLE Claims mit Details\n   - Pro Claim: Evidenz f√ºr/gegen, Einordnung, \"Was k√∂nnte meine Meinung √§ndern\"\n\n### 2. DATENVERARBEITUNG\n\n```javascript\n// Pseudo-Code f√ºr Datenextraktion\nfor each claim in claims:\n  - claim_id ‚Üí Claim-Nummer\n  - claim_text ‚Üí Hauptaussage\n  - verdict ‚Üí Bewertungs-Badge (Farbe gem√§√ü Skala)\n  - confidence_pct ‚Üí Konfidenz-Balken\n  \n  for each evidence_item:\n    - citation ‚Üí Quellenname\n    - url ‚Üí Klickbarer Link (wenn vorhanden)\n    - excerpt ‚Üí Zitat in Anf√ºhrungszeichen\n    - proximity/bias/score ‚Üí In verst√§ndliche Beschreibung umwandeln\n\n// Gesamtscore berechnen:\nconst scores = {\n  'wahr': 1.0,\n  '√ºberwiegend_wahr': 0.75,\n  'gemischt': 0.5,\n  '√ºberwiegend_falsch': 0.25,\n  'falsch': 0,\n  'unpr√ºfbar': null // aus Berechnung ausschlie√üen\n};\n```\n\n### 3. VISUELLES DESIGN\n\n```css\n/* Kernelemente */\n- Score-Circle: Kreisdiagramm mit Prozent in der Mitte\n- Confidence-Bars: Gef√ºllte Balken (width: confidence%)\n- Verdict-Badges mit Farben:\n  * wahr: #10b981 (gr√ºn)\n  * √ºberwiegend_wahr: #34d399 (hellgr√ºn)\n  * gemischt: #f59e0b (orange)\n  * √ºberwiegend_falsch: #fb923c (hellorange)\n  * falsch: #ef4444 (rot)\n  * unpr√ºfbar: #6b7280 (grau)\n\n/* Layout */\n- Container: max-width: 1200px\n- Responsive: @media (max-width: 768px)\n- Grid f√ºr Zweispalten-Layouts\n- Schatten und abgerundete Ecken\n```\n\n### 4. SPEZIALBEHANDLUNG\n\n- **URLs**: Immer als `<a href=\"...\" target=\"_blank\">Link</a>`\n- **Leere Felder**: \"Nicht verf√ºgbar\" oder \"Keine Angabe\"\n- **Datum**: Deutsches Format (TT. Monat JJJJ)\n- **Konfidenz**: Immer als Prozent mit Balken\n- **Metriken**: In Klartext √ºbersetzen (nicht \"Score: 2\" sondern \"mittlere Vertrauensw√ºrdigkeit\")\n\n### 5. VOLLST√ÑNDIGKEITS-CHECKS\n\n‚ö†Ô∏è **KRITISCH**: Stelle sicher, dass:\n1. ALLE Claims aus dem JSON im HTML erscheinen\n2. Die Anzahl der Claims in der √úbersicht = Anzahl in Details\n3. Kein Claim verloren geht oder doppelt erscheint\n4. Bei jedem Claim alle verf√ºgbaren Evidenzen angezeigt werden\n\n### 6. HTML-STRUKTUR TEMPLATE\n\n```html\n<!DOCTYPE html>\n<html lang=\"de\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Faktencheck: [TITEL]</title>\n    <style>[STYLES]</style>\n</head>\n<body>\n    <div class=\"container\">\n        <!-- 1. Header -->\n        <div class=\"header\">\n            <h1>üìä Faktencheck: [TITEL]</h1>\n            <p class=\"subtitle\">[UNTERTITEL]</p>\n            <div class=\"source-info\">\n                Quelle: [SOURCE_INFO]\n                Datum: [DATUM]\n            </div>\n        </div>\n\n        <!-- 2. Gesamtbewertung -->\n        <div class=\"overall-rating\">\n            <div class=\"score-circle\">[SCORE]</div>\n            <div class=\"verdict-summary\">\n                [ANZAHL] Wahr | [ANZAHL] Gemischt | [ANZAHL] Falsch\n            </div>\n        </div>\n\n        <!-- 3. Zusammenfassung -->\n        <div class=\"summary-section\">\n            <h2>Das Wichtigste auf einen Blick</h2>\n            <div class=\"summary-grid\">\n                <div class=\"summary-card\">‚úÖ Was stimmt</div>\n                <div class=\"summary-card false\">‚ùå Was nicht stimmt</div>\n            </div>\n        </div>\n\n        <!-- 4. Bewertungsskala -->\n        <div class=\"legend-section\">\n            <h3>So lesen Sie die Bewertungen</h3>\n            [BEWERTUNGSSKALA + METRIKEN-ERKL√ÑRUNG]\n        </div>\n\n        <!-- 5. Schnell√ºbersicht -->\n        <div class=\"claims-overview\">\n            <h2>Alle Behauptungen im √úberblick</h2>\n            <!-- ALLE CLAIMS HIER -->\n        </div>\n\n        <!-- 6. Details -->\n        <div class=\"claims-detail\">\n            <h2>Detaillierte Analyse</h2>\n            <!-- ALLE CLAIMS MIT VOLLST√ÑNDIGEN DETAILS -->\n        </div>\n\n        <!-- 7. Footer -->\n        <div class=\"footer\">\n            [METHODIK & DISCLAIMER]\n        </div>\n    </div>\n</body>\n</html>\n```\n\n## Output-Anforderung\n**WICHTIG**: Gib NUR den vollst√§ndigen HTML-Code aus. Kein Markdown, keine Erkl√§rungen, keine Code-Bl√∂cke. Beginne direkt mit `<!DOCTYPE html>` und ende mit `</html>`."
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        4672,
        336
      ],
      "id": "4f85f10e-5b0e-40ff-bfff-ddda2812a45f",
      "name": "HTML Builder"
    },
    {
      "parameters": {
        "jsCode": "// n8n Code Node - HTML zu Datei konvertieren\nconst htmlContent = $input.first().json.output || $input.first().json.message;\n\n// HTML bereinigen (falls LLM Markdown-Bl√∂cke hinzugef√ºgt hat)\nlet cleanHTML = $input.first().json.text;\n\n// Markdown Code-Bl√∂cke entfernen\ncleanHTML = cleanHTML.replace(/```html\\n?/g, '');\ncleanHTML = cleanHTML.replace(/```\\n?/g, '');\n\n// F√ºhrende/nachfolgende Whitespaces\ncleanHTML = cleanHTML.trim();\n\n// Fallback falls kein DOCTYPE vorhanden\nif (!cleanHTML.toLowerCase().includes('<!doctype html>')) {\n  console.log('Adding DOCTYPE to HTML');\n  cleanHTML = `<!DOCTYPE html>\\n${cleanHTML}`;\n}\n\n// Filename generieren\nconst timestamp = new Date().toISOString().split('T')[0];\nconst timeString = new Date().toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });\nconst filename = `Faktencheck_${timestamp}_${timeString.replace(':', '-')}.html`;\n\n// Buffer f√ºr Telegram vorbereiten\nconst buffer = Buffer.from(cleanHTML, 'utf8');\n\n// Kurze Caption f√ºr Telegram\nconst caption = `üìä Faktencheck-Analyse\\nüìÖ ${timestamp} ${timeString}\\nüìÑ HTML-Report zum Download`;\n\nreturn [{\n  json: {\n    filename: filename,\n    caption: caption,\n    html_content: cleanHTML,\n    file_size: buffer.length\n  },\n  binary: {\n    data: {\n      data: buffer.toString('base64'),\n      mimeType: 'text/html',\n      fileName: filename,\n      fileExtension: 'html'\n    }\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5024,
        336
      ],
      "id": "061a74c6-6805-4e4c-83b1-ebd7ddc276a8",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "operation": "sendDocument",
        "chatId": "={{ $('Get Session').item.json.chat_id }}",
        "binaryData": true,
        "additionalFields": {
          "caption": "={{ $json.caption }}",
          "disable_notification": false,
          "fileName": "={{ $json.filename }}"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5248,
        336
      ],
      "id": "90814bd6-3c5c-42be-94f2-0a44c3d28ded",
      "name": "Send a document",
      "webhookId": "abac354d-e1ce-42ea-a842-ac4eb00f0ed3",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        4672,
        560
      ],
      "id": "80cdd376-addf-4f00-8be7-9108b61fa810",
      "name": "Gemini 2.5 Flash",
      "credentials": {
        "openRouterApi": {
          "id": "vfRU7ddpmA2Omopm",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "content": "üì± TELEGRAM START\n\nEmpf√§ngt YouTube-Links von Nutzern\n‚Üì Startet automatisch die Analyse",
        "height": 336,
        "width": 416,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1568,
        384
      ],
      "typeVersion": 1,
      "id": "deb575f2-22b3-4097-bcac-7904a1708f41",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "ü§ñ NACHRICHTENANALYSE\n\n‚Üí Erkennt YouTube-Links\n‚Üí Erstellt witzige Kommentare\n‚Üí Schnelle LLM-basierte Antworten",
        "height": 384,
        "width": 800,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -560,
        48
      ],
      "typeVersion": 1,
      "id": "b3e3bd76-b0c2-4f9d-91c1-aaa11688d73d",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "üîç URL CLASSIFIER\n\nKlassifiziert eingehende Nachrichten:\n‚Üí YouTube-Link: Weiter zur Analyse\n‚Üí Andere: Antwortet mit Chat\n\n",
        "height": 688,
        "width": 768,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1136,
        176
      ],
      "typeVersion": 1,
      "id": "1dbf6f39-6b9b-456d-bd16-1ba473117765",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "üé• VIDEO PROCESSING\n\n1. Video-ID aus Link extrahieren\n2. Session in Datenbank speichern\n3. Pr√ºfung: Transkript bereits vorhanden?\n4. Falls neu:\n   ‚Üí Video-Metadaten laden (Supadata)\n   ‚Üí Transkript herunterladen\n   ‚Üí In Datenbank cachen",
        "height": 480,
        "width": 1760,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        256,
        -112
      ],
      "typeVersion": 1,
      "id": "ac57813c-247b-4aa3-82fa-2ff578be6381",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "üß† CLAIM EXTRACTION\n\nKI extrahiert √ºberpr√ºfbare Behauptungen:\n‚Üí Nutzt GPT-4.1-mini\n‚Üí Analysiert Transkript\n‚Üí Findet atomare, pr√ºfbare Aussagen\n‚Üí Speichert Thesen in Datenbank",
        "height": 480,
        "width": 560,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2032,
        -112
      ],
      "typeVersion": 1,
      "id": "2d2cf469-a1fa-4a43-87b0-20effb12526d",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "üîé FACT-CHECKING ENGINE\n\n**AI-Agent mit Tools:**\n- Web-Recherche (Exa)\n- Zeitkontext (Time MCP)\n- Tiefenanalyse (Sequential Thinking)\n- Telegram-Updates (typing...)\n\n**Pr√ºft jede These:**\n‚úì Multi-Source Triangulation\n‚úì Bias-Analyse\n‚úì Konfidenz-Bewertung\n\n‚è±Ô∏è Dauert 2-15 Minuten pro Video",
        "height": 704,
        "width": 2000,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2608,
        16
      ],
      "typeVersion": 1,
      "id": "22e4493a-2c6c-449f-917b-9ce580b2b67d",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "üìä HTML REPORT GENERATOR\n\nErstellt professionellen Bericht:\n‚Üí Gemini 2.5 Flash konvertiert JSON zu HTML\n‚Üí Visuelles Design mit Scores\n‚Üí Quellenangaben & Evidenz\n‚Üí Download als .html-Datei via Telegram\n\n**Features:**\n‚úÖ Gesamtbewertung\n‚úÖ Zusammenfassung\n‚úÖ Detaillierte Quellen-Analyse",
        "height": 656,
        "width": 816,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4624,
        64
      ],
      "typeVersion": 1,
      "id": "05c2a36a-f498-49d8-8af9-006e8da49e96",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger1').item.json.message.chat.id }}",
        "text": "Hallo! üëã Schick mir einen YouTube-Link und ich pr√ºfe die Fakten im Video f√ºr dich.",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -400,
        816
      ],
      "id": "0e83ae50-9353-4246-98b9-5e291ce8a10e",
      "name": "Send a text message3",
      "webhookId": "039be5ed-471a-4ba7-8a72-be3709655a56",
      "credentials": {
        "telegramApi": {
          "id": "d4hzCom8E8zbu6C4",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "content": "‚ùå KEINE YOUTUBE-URL\n\nUser hat keinen YouTube-Link gesendet\n‚Üí Keine Analyse m√∂glich\n‚Üí Erkl√§rt dem Nutzer, was er braucht\n\nWartet auf g√ºltigen YouTube-Link",
        "height": 336,
        "width": 464,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -672,
        656
      ],
      "typeVersion": 1,
      "id": "b91fdd01-f207-497d-96c6-c62549b33c2f",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "üîë MCP SERVER KONFIGURATION\n\n**WICHTIG: API-Keys m√ºssen gesetzt werden!**\n\n**3 MCP Server ben√∂tigen Konfiguration:**\n\n1Ô∏è‚É£ **Sequential Thinking**\n   ‚Üí smithery-ai/server-sequential-thinking\n\n2Ô∏è‚É£ **Web Search (Exa)**\n   ‚Üí smithery.ai/server/exa\n\n3Ô∏è‚É£ **Time Context**\n   ‚Üí smithery.ai/time-mcp/\n\n**So bekommst du die Keys:**\n\n1. Gehe zu: https://smithery.ai\n2. Erstelle einen Account\n3. Gehe zu \"API Keys\"\n4. Erstelle einen neuen API Key\n5. Kopiere den Key\n\n**In n8n konfigurieren:**\n\n1. √ñffne jeden MCP Client Tool Node\n2. Ersetze \"YOUR_SMITHERY_API_KEY\" mit deinem Key\n3. Ersetze \"YOUR_PROFILE_ID\" mit deiner Profile ID\n4. Teste die Verbindung\n\n**Sicherheit:**\n‚ö†Ô∏è Niemals echte Keys in Templates teilen!\n‚úÖ Verwende Umgebungsvariablen wenn m√∂glich",
        "height": 800,
        "width": 600,
        "color": 1
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4800,
        800
      ],
      "typeVersion": 1,
      "id": "mcp-config-note",
      "name": "MCP Server Konfiguration"
    },
    {
      "parameters": {
        "content": "üíæ CACHE-PR√úFUNG\n\nWurde dieses Video schon analysiert?\n\n‚úÖ Transkript vorhanden:\n   ‚Üí Aus Datenbank laden (schnell!)\n   ‚Üí Direkt zur Faktencheck-Phase\n\n‚ùå Transkript fehlt:\n   ‚Üí Video-Daten neu laden\n   ‚Üí Transkript herunterladen\n   ‚Üí In Cache speichern",
        "height": 816,
        "width": 224
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        688,
        -256
      ],
      "typeVersion": 1,
      "id": "b9d04803-c402-4cfb-ac10-a1288ba71e4e",
      "name": "Sticky Note8"
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger1": {
      "main": [
        [
          {
            "node": "Send a chat action",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mistral 8B": {
      "ai_languageModel": [
        [
          {
            "node": "Youtube URL?",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Fact Checker",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "smithery-ai/server-sequential-thinking": {
      "ai_tool": [
        [
          {
            "node": "Fact Checker",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Fact Checker": {
      "main": [
        [
          {
            "node": "HTML Builder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Youtube URL?": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If Session does not exist",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Session",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get videoID": {
      "main": [
        [
          {
            "node": "Remember Session",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Transcript does not exist": {
      "main": [
        [
          {
            "node": "Get video details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Remember Session": {
      "main": [
        [
          {
            "node": "If Transcript does not exist",
            "type": "main",
            "index": 0
          },
          {
            "node": "If Transcript exists",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Array to Text": {
      "main": [
        [
          {
            "node": "Extract theses",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Session": {
      "main": [
        [
          {
            "node": "Get Transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Transcript": {
      "main": [
        [
          {
            "node": "Send a chat action5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Fact Checker",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "openai/gpt-4.1-mini": {
      "ai_languageModel": [
        [
          {
            "node": "Extract theses",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Extract theses": {
      "main": [
        [
          {
            "node": "Upsert Theses + Video Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get video details": {
      "main": [
        [
          {
            "node": "Send a chat action3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get video transcript": {
      "main": [
        [
          {
            "node": "Array to Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a chat action": {
      "main": [
        [
          {
            "node": "Youtube URL?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "Send a chat action1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a chat action1": {
      "main": [
        [
          {
            "node": "Send a text message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message": {
      "main": [
        [
          {
            "node": "Get videoID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upsert Theses + Video Data": {
      "main": [
        [
          {
            "node": "Get Session",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a chat action3": {
      "main": [
        [
          {
            "node": "Send a text message2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message2": {
      "main": [
        [
          {
            "node": "Get video transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a chat action5": {
      "main": [
        [
          {
            "node": "Send a text message4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a text message4": {
      "main": [
        [
          {
            "node": "Fact Checker",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Session does not exist": {
      "main": [
        [
          {
            "node": "Send a text message3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Transcript exists": {
      "main": [
        [
          {
            "node": "Get Session",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "send typing...": {
      "ai_tool": [
        [
          {
            "node": "Fact Checker",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ask contact": {
      "ai_tool": [
        [
          {
            "node": "Fact Checker",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "send message": {
      "ai_tool": [
        [
          {
            "node": "Fact Checker",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "smithery.ai/server/exa": {
      "ai_tool": [
        [
          {
            "node": "Fact Checker",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "smithery.ai/time-mcp/": {
      "ai_tool": [
        [
          {
            "node": "Fact Checker",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "HTML Builder": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Send a document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini 2.5 Flash": {
      "ai_languageModel": [
        [
          {
            "node": "HTML Builder",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "223edd46-0d1e-4e0b-80cf-b0b139be8d38",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "YOUR_N8N_INSTANCE_ID"
  },
  "id": "KHYjO8knQPi3sLJA",
  "tags": [
    {
      "createdAt": "2025-06-28T09:22:50.176Z",
      "updatedAt": "2025-06-28T09:22:50.176Z",
      "id": "S9egGRyw3zsMWnmF",
      "name": "Videokurs"
    }
  ]
}